# 🗺️ AI-Powered CityTour Planner

Inspired by my own travel adventures, I built CityTour Planner to help you effortlessly explore cities with personalized one-day tours. This full-stack app suggests the best sights, optimizes your route on an interactive map, and crafts engaging narrations to bring your trip to life. Access it effortlessly via a user-friendly **Streamlit interface**, powerful **FastAPI backend**, or command-line tool.

### Route Comparison in Action (Demo)
Watch CityTour Planner in action: dynamically generating and letting you switch between two smart route plans tailored for your day. 
![CityTour Planner Demonstration](visualizations/MyTourPlanner-demo.gif)

---

## My Role & Skills Demonstrated

I built this project from the ground up, combining my love for travel and coding to create a smart city tour planner.

- **Full-stack development** using Python, FastAPI for the backend, and Streamlit for the frontend, delivering a seamless user experience.

- Integration of advanced **LLM narration** with the Gemma-2B model, showcasing practical use of large language models for engaging travel storytelling.

- Implementing **algorithmic route optimization** with careful inclusion of C++ code to boost calculation accuracy and performance (though some integration challenges remain).

- Emphasis on **modular, maintainable design** with clear API separation, enabling easy extension and deployment using Docker.
  
- Tackling real-world complexity such as **weather-aware itinerary adjustments** and multi-modal transport routing.

This project highlights skills in full-stack engineering, algorithmic problem solving, and applied AI — adaptable to roles focused on either backend, frontend, or machine learning. One rewarding challenge was balancing real-world complexities like weather and routing while keeping the app user-friendly.

---

## Why CityTour Planner?

I created this to solve problems I faced while exploring new cities.

Ever had a trip where the weather threw your plans off? Imagine visiting Paris and ending up at the Eiffel Tower twice because wind forced you to cancel the first visit — leaving no time for the Orsay Museum or an evening at the Louvre. It’s a common travel dilemma: must-see spots ticked off, but hidden gems missed because of time or unexpected changes.

CityTour Planner solves this by balancing your itinerary smartly, factoring in travel modes like walking, cycling, or driving — and even adapting to weather conditions. It takes the guesswork out, ensuring you enjoy a seamless, well-paced tour with engaging narrations that add a personal touch to your journey.

No more scrambling with maps or missing out — just smart, seamless exploration.

---

## ✨ What It Does

- **Tailored Tour Planning**  
  Design your day in morning, afternoon, and evening blocks — optimized for maximum enjoyment and minimal hassle.
  
- **Smart Routing**  
  A powerful solver finds the best order to visit sights, respecting your chosen transport mode and limits for a smooth trip.

- **Weather-Aware Planning**  
  Adapt your itinerary dynamically to changing weather conditions — ensuring outdoor activities happen when the sun shines and cozy indoor stops are ready for rainy spells.

- **Interactive Maps**  
  Color-coded paths and category-specific icons make your route easy to follow and visually engaging.

- **Engaging Narrations**  
  Postcard-style text generated by advanced language models adds storytelling flair to your itinerary.

- **Clean and Modular Design**  
  Frontend and backend communicate via API, making the app flexible, maintainable, and easy to deploy anywhere.
---

## What’s New?

- Streamlit interface now communicates directly with FastAPI backend for instant updates.
- Exploring different route optimization approaches to balance efficiency and real-world constraints.
- Custom map icons improve sight recognition at a glance.
- Tour size limited to 15 sights to ensure fast and reliable routing.
- Simplified Docker setup with `docker-compose`.
- Full type hinting enhances code clarity and developer experience.

---

## Quick Usage Example (CLI)

Fancy trying out the narration feature? Run this from your terminal to get a taste of the morning tour description:

```bash
$ python tourist_planner.py --city "Munich" --use-osm
🗓️ Morning:
The city wakes up — golden light reflects off the riverbank as ...
```


## 🧠 LLM Narration Modes

| Mode               | Where                    | Runtime | Notes                                                                                                          |
| ------------------ | ------------------------ | ------- | -------------------------------------------------------------------------------------------------------------- |
| **Template**       | Streamlit & FastAPI      | Instant | 	A ready-to-go narration mode, no API keys needed — great for quick results.                                                                     |
| **Gemma-2B / GPT** | CLI (`tourist_planner.py`) | CPU/GPU | Full language model pipeline with richer narrations. Use --llm flag or env var to toggle. |

## 🛠️ Getting Started

Follow these steps to quickly set up and run the project locally.

```bash
# Create a virtual environment and activate it (Windows/macOS/Linux)
python -m venv .venv
# Windows
.venv\Scripts\activate
# macOS/Linux
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Run the backend (FastAPI)
uvicorn api.main:app --reload --port 8000

# In a new terminal, run the frontend (Streamlit)
streamlit run frontend/app.py
```

Visit the app at: [http://localhost:8501](http://localhost:8501)  
API docs (Swagger): [http://localhost:8000/docs](http://localhost:8000/docs)

---

## 🐳 Docker (Optional)

> **Prerequisites:** Docker 24+ and Docker Compose

```bash
# Clone the repo
git clone https://github.com/<your-org>/citytour-planner.git
cd citytour-planner

# Start everything
docker-compose up -d --build
```

Open:
- 🌐 Streamlit UI: http://localhost:8501  
- 🔌 API Docs: http://localhost:8000/docs

---

## 📂 Project Structure

```
.
|   docker-compose.yml
|   Dockerfile.backend
|   Dockerfile.frontend
|   LICENSE
|   README.md
|   requirements.txt
|   tourist_planner.py
...
|
+---api
|       main.py
|       requirements.txt
|
+---data
|       Munich-Map.png
|       paris_sights_15.csv
|       sights.csv
|       sights_berlin.csv
|
+---frontend
|       app.py
|       requirements.txt
|       ui.py
|       __init__.py
|
+---planner
|       aware_tour.py
|       base_planner.py
...
|
+---tests
|       test_planner.py
|
+---tools
|       create_weather_decision_tree.py
|       __init__.py
|
\---visualizations
        MyTourPlanner-demo.gif
        weather_decision_tree
        weather_decision_tree.png
```

---

## 🔌 API Reference

### `POST /plan`

Generate a full-day tour plan.

```json
{
  "city": "Berlin, Germany",
  "categories": ["museum", "park"],
  "mode": "walking"
}
```

**Response:**

```json
{
  "morning": [{"name": "Museum B", "lat": 52.52, "lon": 13.41}],
  "afternoon": [...],
  "evening": [...]
}
```

### `POST /narrate`

Generate narration for one time slot.

```json
{
  "slot": "morning",
  "city": "Berlin, Germany",
  "sights": ["Museum B", "Park A"]
}
```

**Response:**

```json
{
  "text": "The city wakes up — golden light ..."
}
```

📚 Swagger docs: [http://localhost:8000/docs](http://localhost:8000/docs)

---

## 🌍 Cloud Deployment

Push to any Docker registry and deploy to:

- 🟣 Render / Fly.io
- ☁️ AWS Fargate / Google Cloud Run
- ☸️ Kubernetes

---

## 🔮 Future Work

Here are some planned improvements and features for upcoming releases:

- 📦 Large Tour Support: Background task queues (e.g. Celery) for >10-sight plans
- 🚫 Frontend Planning Limit: Validate user input before routing
- 🧠 Caching: Use Redis for weather, narration, and route caching
- 📈 Monitoring: Integrate Prometheus/Grafana with FastAPI
- 🗄️ Persistent Storage: Add PostgreSQL to track user sessions/preferences
- 🧭 Mode Switch UI: Let users pick transport mode via dropdown

---

## 📜 License

Released under the [MIT License](LICENSE).